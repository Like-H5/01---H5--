<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>01-axios使用</title>
</head>
<body>


<ul id="menus">

</ul>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


<!--
测试服务器: abc
正式服务器: 456
-->

<script>

    axios.defaults.baseURL = "http://lxt.itlike.com/api";

    axios.interceptors.response.use(function (response) {
        // 正常响应时的额外处理
        console.log("先接受到请求结果")
        response.tool = 123;
        return response;
    }, function (error) {
        //  错误响应时的额外处理
        return Promise.reject(error);
    });

</script>

<script type="text/html">
    let menus = document.getElementById("menus");

    axios.get("/client/home/nav").then(response=>{
        console.log("成功", response)
        menus.innerHTML = response.data.map(item=>`
            <li>${item.title}</li>
        `).join("")
    }).catch(error => {
        console.log("错误", error)
    })


</script>

<script  type="text/html">

    let url = "http://lxt.itlike.com/api/client/course/course_comment"
    axios.get(url, {
        params: {
            id: 1
        }
    }).then(response=>{
        console.log(response)
    }).catch(err=>{
        console.log("错误", err)
    })


</script>

<script type="text/html">

    axios.post("/client/course/publish_comment", {
        course_id: 7,
        user_id: 18,
        score: 5,
        content: "撩课-Sz 到此一游!!"
    }).then(response=>{
        console.log("评论结果: ", response)
    })



</script>

<script>

    axios.all([axios.get("/client/home/nav"), axios.get("/client/home/ad_course")]).then(axios.spread(function(res1,res2){
        //当这两个请求都完成的时候会触发这个函数，两个参数分别代表返回的结果
        console.log(res1, res2)
    }))


</script>

</body>
</html>